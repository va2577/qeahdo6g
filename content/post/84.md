---
title: 米ドル建ての口座の取引数量の計算式
date: 2018-01-30T18:31:08+09:00
categories:
  - トレード
tags:
  - Money
  - トレード
---

Forex Tester で検証していて、複利で運用した場合の口座残高の推移を把握しておきたいと思いました。
が、 Forex Tester 2 の口座はドル建てなので、取引数量の計算式について調べてみました。

<!--more-->

## 決済損益の計算式

まず、決済損益の計算式から見てみます。

マネーパートナーズの売買報告書には次の計算式が記載されていました。

新規約定が買の場合: (決済約定レート － 新規約定レート) × 約定数量

新規約定が売の場合: (新規約定レート － 決済約定レート) × 約定数量

この計算式の "約定数量" を求める形に変えてあげればいいのかな。
いったん、買いの場合だけを考えて、次の計算式になりました。

約定数量 ＝ 決済損益 ÷ (決済約定レート － 新規約定レート)

定率の資金管理を考えているので、 "決済損益" のところが、定率×口座残高の金額以内になるようにしたいです。
そうすると、次の計算式になりました。

約定数量 ＝ (定率 × 口座残高) ÷ (決済約定レート － 新規約定レート)

## 円建て口座で円クロス以外の通貨ペアを取引した場合の計算式

次の記載を見ると、先の計算式では十分ではないようです。

> ※円のみお預けいただいているお客様であっても、自動円転機能をご利用でない場合、ユーロ/米ドル・ポンド/米ドル・豪ドル/米ドル・ニュージーランドドル/米ドルのお取引をされた場合には、実現損益・スワップポイント共に米ドルで発生し、米ドルでの預り、ユーロ/豪ドル・ポンド/豪ドルのお取引をされた場合には、実現損益・スワップポイント共に豪ドルで発生し、豪ドルでの預り、ユーロ/ポンドのお取引をされた場合には、実現損益・スワップポイント共にポンドで発生し、ポンドでの預り、豪ドル/ニュージーランドドルのお取引をされた場合には、実現損益・スワップポイント共にニュージーランドドルで発生し、ニュージーランドドルでの預りとなりますのでご注意ください。
>
> <cite>[取引ガイド | FX・証券取引のマネーパートナーズ　-外為を誠実に-](https://www.moneypartners.co.jp/fx/partnersfx/guide.html)</cite>

ユーロ/米ドルを取引すると、米ドルで損益が上がってくるようです。
ポンド/豪ドルを取引すると、豪ドルで損益が上がってくるようです。
通貨ペアの右側の通貨で損益が上がってくるということのようです。

その上がってきた損益を円に換えることを円転というようです。
そして、円転して円建て口座に入れるようです。

自分が開設したマネーパートナーズの口座では初期設定で自動円転機能を利用するようになっていたようです。

円転を考慮して、次のような計算式になりました。

約定数量 ＝ (定率 × 口座残高) ÷ ((決済約定レート － 新規約定レート) × ○○転レート)

## 損益が発生する通貨

サラッと記載されていましたが、損益が発生する通貨について、自分は最近まであまり意識していませんでした。

> 円を介さない通貨ペア投資のポイント
>
> ユーロ/米ドル、ユーロ/スイス、米ドル/カナダドルなど、対円以外の通貨ペアも数多くあり、実際にFXで取引できます。
> 例えばユーロ/米ドルの場合、差損益は右側の通貨である米ドルで発生します。1ユーロ＝1.50米ドルが1ユーロ＝1.80米ドルになった場合、1ユーロにつき30セントの為替差益が発生していることになり、それが口座に反映されます。
> ただ、それを現金化する場合は、30セントを円に替えたうえで出金しなければなりません。その時点の米ドル/円のレートによって、円ベースの差益額も変わってきますので、注意が必要です。
>
> <cite>[「通貨ペア」の種類 | 外国為替の基礎知識 | セントラル短資FX](https://www.central-tanshifx.com/knowledges/basis/foreign-exchange-currency-pair.html)</cite>

これは円クロスの通貨ペアしか取引していなかったりすると気がつかないところです。

それから、ユーロ/米ドル ＝ 1.50 米ドルという意味について、前よりもう少し理解できました。

これは、 1 ユーロが 1.50 米ドルという意味になるので、当たり前ですけど、 2 ユーロだったら、

2 ユーロ × 1.50 米ドル ＝ 3.00 米ドル

になりました。
じゃあ、 1 米ドルは何ユーロ？っていうと、

1 米ドル × (1 ユーロ ÷ 1.5 米ドル) ＝ 0.666... ユーロ

になりました。
2 米ドルは、

2 米ドル × (1 ユーロ ÷ 1.5 米ドル) ＝ 1.333... ユーロ

になりました。
これは、

2 米ドル ÷ 1.5 米ドル ＝ 1.333... ユーロ

でもいいのかもしれませんが、自分はユーロ/米ドルレートの逆数で乗算した方がしっくりきます。

だから、米ドル/カナダ ＝ 1.2373 カナダドルだとして、 2 カナダドルは何米ドル？っていうと、

2 カナダドル × (1 米ドル / 1.2373 カナダドル) ＝ 1.6164... 米ドル

になりました。

整理すると、

* 為替の計算をする際は、基本的に乗算する
* 通貨ペアの右側の通貨にする際は、レートをそのまま乗算する
* 通貨ペアの左側の通貨にする際は、レートの逆数で乗算する

のようになりました。

## 計算式を円建ての場合で考えてみると

計算式は次のようになっていました。

約定数量 ＝ (定率 × 口座残高) ÷ ((決済約定レート － 新規約定レート) × ○○転レート)

まず、円建ての口座で考えてみます。

円建てなので、計算式の "○○転レート" は円転レートになります。

円転するときの具体的なレートは取引通貨ペアによって次のように変わります。

* 取引通貨ペアが米ドル/円の場合は、円転しないため 1(損益が円で上がってくるため、 1 円を 1 円に換えるとでも言うべきか…)
* 取引通貨ペアがユーロ/米ドルの場合は、米ドル/円のレート(米ドルで上がってきた損益を円に換える)
* 取引通貨ペアがポンド/豪ドルの場合は、豪ドル/円のレート(豪ドルで上がってきた損益を円に換える)

円建ての場合は、取引通貨ペアの右側の通貨に対する円クロスのレートになるようです。

## 計算式をドル建ての場合で考えてみると

次に、ドル建ての口座で考えてみます。

ドル建てなので、計算式の "○○転レート" はドル転レートになります。

ドル転するときの具体的なレートは取引通貨ペアによって次のように変わります。

* 取引通貨ペアが米ドル/円の場合は、 1 ÷ 米ドル/円のレート(円で上がってきた損益を米ドルに換える)
* 取引通貨ペアがユーロ/米ドルの場合は、ドル転しないため 1(損益が米ドルで上がってくるため、 1 米ドルを 1 米ドルに換えるとでも言うべきか…)
* 取引通貨ペアがポンド/豪ドルの場合は、豪ドル/ドルのレート(豪ドルで上がってきた損益を米ドルに換える)

ドル建ての場合は、取引通貨ペアの右側の通貨に対するドルストレートのレートになるようです。

## 米ドル建て口座でポンド/豪ドルを取引する場合の取引数量を計算してみると

ポンド/豪ドルの取引の例で計算してみます。

* 口座: 米ドル建て
* 取引通貨ペア: ポンド/豪ドル
* 定率: 2%
* 口座残高: 10,000 米ドル
* 新規約定レート: 1.73833 豪ドル
* 決済約定レート: 1.73333 豪ドル
* 豪ドル/米ドルレート: 0.80670 米ドル

計算式は、

約定数量 ＝ (定率 × 口座残高) ÷ ((決済約定レート － 新規約定レート) × ○○転レート)

なので、例の値を当てはめると、

約定数量 ＝ (2% × 10,000 米ドル) ÷ ((1.73333 豪ドル － 1.73833 豪ドル) × 0.80670 米ドル)

の計算式になって、それを計算すると、

約定数量 ＝ -49288.99394

になりました。
絶対値で扱ってあげて、 49,288 通貨になりました。

Forex Tester で取引する場合は、 1 ロットが 10 万通貨で、 1 万通貨の場合は、 0.1 ロットとすることができるので、小数点以下 1 桁までで切り捨てして、 0.4 ロットで取引すればよいのだと思います。

## 米ドル建て口座で米ドル/カナダを取引する場合の取引数量の計算してみると

もう一つ、米ドル/カナダの取引の例で計算してみます。

* 口座: 米ドル建て
* 取引通貨ペア: 米ドル/カナダ
* 定率: 5%
* 口座残高: 10,000 米ドル
* 新規約定レート: 1.23815 カナダドル
* 決済約定レート: 1.23515 カナダドル
* 米ドル/カナダレート: 1.23515 カナダドル

約定数量 ＝ (5% × 10,000 米ドル) ÷ ((1.23515 カナダドル － 1.23815 カナダドル) × (1 ÷ 1.23515 カナダドル))

の計算式になって、それを計算すると、

約定数量 ＝ -205858.3333

になりました。

205,858 通貨なので、 2.0 ロットで取引すれば良いのだと思います。

## 終わり

計算式からもわかると思いますが、円転やドル転する際もレートの変動の影響を受けますので、エントリーする前に決済損益を厳密に決定・把握することはできないんだ、と思いました。

未来の円転やドル転する際のレートはわからないので、エントリー時のレートで計算して、誤差は許容するところが妥当なのかな、と考えています。

ポジションの保有時間が長くなるほど円転やドル転する際のレートの変動もエントリー時から比べると大きくなるでしょうから、それがどの程度結果に影響してくるのか、しばらく運用して様子を見てみたいと思っています。

検証をしていると、数日から、一か月、長いと二か月程度の保有時間になっているので、少し心配ではあります。

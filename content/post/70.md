---
title: pip ã§ Numba ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
date: 2017-04-07T17:46:35+09:00
tags:
  - Numba
  - Python
---

GitHub ã«ã‚ã‚‹èª°ã‹ãŒä½œã£ãŸ Python ã®ã‚½ãƒ¼ã‚¹ã‚’å‹•ã‹ã—ãŸãã¦ã€å®Ÿè¡Œã—ã¦ã¿ãŸã®ã§ã™ãŒã€Numba ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€Numba ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚

<!--more-->

## Numba?

> Numba gives you the power to speed up your applications with high performance functions written directly in Python.
> Numba works by generating optimized machine code using the LLVM compiler infrastructure at import time, runtime, or statically (using the included pycc tool).
>
> <cite>[Numba â€” Numba](http://numba.pydata.org)</cite>

Numba ã¯ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ã®ãŸã‚ã«ä½¿ã†ã‚‚ã®ã ã¨è§£é‡ˆã—ã¾ã—ãŸã€‚

## Numba ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

> Installing
The easiest way to install numba and get updates is by using the Anaconda Distribution: [http://continuum.io/downloads.html](http://continuum.io/downloads.html)
>
> If you have Anaconda installed already:
>
>     $ conda install numba
>
> or
>
>     $ conda update numba
>
> For custom python environments see the [README on Github.](https://github.com/numba/numba#custom-python-environments)
>
> <cite>[Numba â€” Numba](http://numba.pydata.org)</cite>

Numba ã®å…¬å¼ã®ã‚µã‚¤ãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’è¦‹ã‚‹ã¨ã€Anaconda Distribution ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

> Anaconda is the leading open data science platform powered by Python. The open source version of Anaconda is a high performance distribution of Python and R and includes over 100 of the most popular Python, R and Scala packages for data science.
>
> <cite>[Download Anaconda Now! | Continuum](https://www.continuum.io/Downloads)</cite>

Anaconda ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã®ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ 100 ä»¥ä¸Šå«ã‚ãŸç’°å¢ƒã®ã‚ˆã†ã§ã™ã€‚

> Custom Python Environments
>
> or simply
>
>     $ pip install numba
>
> <cite>[GitHub - numba/numba: NumPy aware dynamic Python compiler using LLVM](https://github.com/numba/numba#custom-python-environments)</cite>

Anaconda ä»¥å¤–ã§ Numba ã‚’ä½¿ã†ã«ã¯ pip ã‚’ä½¿ã†ã‚ˆã†ã§ã™ã€‚
ä»Šå›ã¯ pip ã‚’ä½¿ã†æ–¹æ³•ã§é€²ã‚ã¾ã—ãŸã€‚

## Numba ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
$ pip install numba
Collecting numba
  Downloading numba-0.31.0.tar.gz (1.2MB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1.2MB 398kB/s
Collecting llvmlite (from numba)
  Downloading llvmlite-0.16.0.tar.gz (95kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 102kB 527kB/s
Requirement already satisfied: numpy in ./lib/python3.6/site-packages (from numba)
Building wheels for collected packages: numba, llvmlite
  Running setup.py bdist_wheel for numba ... done
  Stored in directory: /Users/user/Library/Caches/pip/wheels/1a/93/9e/25e3fef05380f6db4273de73ea0fd6645bcdba14659f1e4e2d
  Running setup.py bdist_wheel for llvmlite ... error
  Complete output from command /Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" bdist_wheel -d /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/tmpg1o_xzcopip-wheel- --python-tag cp36:
  running bdist_wheel
  running build
  got version from file /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/llvmlite/_version.py {'version': '0.16.0', 'full': '964cf1d6d725b000c769379a5efe11932fcfc551'}
  running build_ext
  /Users/user/ENV/bin/python3.6 /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py
  LLVM version... Traceback (most recent call last):
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 105, in main_posix
      out = subprocess.check_output([llvm_config, '--version'])
    File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 336, in check_output
      **kwargs).stdout
    File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 403, in run
      with Popen(*popenargs, **kwargs) as process:
    File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 707, in __init__
      restore_signals, start_new_session)
    File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 1326, in _execute_child
      raise child_exception_type(errno_num, err_msg)
  FileNotFoundError: [Errno 2] No such file or directory: 'llvm-config'

  During handling of the above exception, another exception occurred:

  Traceback (most recent call last):
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 152, in <module>
      main()
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 146, in main
      main_posix('osx', '.dylib')
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 108, in main_posix
      "to the path for llvm-config" % (llvm_config,))
  RuntimeError: llvm-config failed executing, please point LLVM_CONFIG to the path for llvm-config
  error: command '/Users/user/ENV/bin/python3.6' failed with exit status 1

  ----------------------------------------
  Failed building wheel for llvmlite
  Running setup.py clean for llvmlite
Successfully built numba
Failed to build llvmlite
Installing collected packages: llvmlite, numba
  Running setup.py install for llvmlite ... error
    Complete output from command /Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-4lv7jqpk-record/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/ENV/bin/../include/site/python3.6/llvmlite:
    running install
    running build
    got version from file /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/llvmlite/_version.py {'version': '0.16.0', 'full': '964cf1d6d725b000c769379a5efe11932fcfc551'}
    running build_ext
    /Users/user/ENV/bin/python3.6 /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py
    LLVM version... Traceback (most recent call last):
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 105, in main_posix
        out = subprocess.check_output([llvm_config, '--version'])
      File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 336, in check_output
        **kwargs).stdout
      File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 403, in run
        with Popen(*popenargs, **kwargs) as process:
      File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 707, in __init__
        restore_signals, start_new_session)
      File "/usr/local/Cellar/python3/3.6.0_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 1326, in _execute_child
        raise child_exception_type(errno_num, err_msg)
    FileNotFoundError: [Errno 2] No such file or directory: 'llvm-config'

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 152, in <module>
        main()
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 146, in main
        main_posix('osx', '.dylib')
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/ffi/build.py", line 108, in main_posix
        "to the path for llvm-config" % (llvm_config,))
    RuntimeError: llvm-config failed executing, please point LLVM_CONFIG to the path for llvm-config
    error: command '/Users/user/ENV/bin/python3.6' failed with exit status 1

    ----------------------------------------
Command "/Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-4lv7jqpk-record/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/ENV/bin/../include/site/python3.6/llvmlite" failed with error code 1 in /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-o1x6nnt4/llvmlite/
```

æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

* `FileNotFoundError: [Errno 2] No such file or directory: 'llvm-config'`
* `RuntimeError: llvm-config failed executing, please point LLVM_CONFIG to the path for llvm-config`

llvm-config ã‚³ãƒãƒ³ãƒ‰ãŒå¿…è¦ã®ã‚ˆã†ã§ã™ãŒã€ãªã„ã®ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

LLVM è‡ªä½“ã¯ Xcode ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸæ™‚ã®ã‚‚ã®ãŒã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€llvm-config ã¯ç¢ºã‹ã«ãªã„ã¿ãŸã„ã§ã™ã€‚

## llvm-config?

> DESCRIPTION
>
> llvm-config makes it easier to build applications that use LLVM. It can print the compiler flags, linker flags and object libraries needed to link against LLVM.
>
> <cite>[llvm-config - Print LLVM compilation options â€” LLVM 5 documentation](http://llvm.org/docs/CommandGuide/llvm-config.html)</cite>

LLVM ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å‡ºåŠ›ã™ã‚‹ã‚‚ã®ã ã¨è§£é‡ˆã—ã¾ã—ãŸã€‚

## LLVM ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

llvm-config ã‚’å«ã‚€ LLVM ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã—ãŸã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’èª¿ã¹ã¾ã—ãŸã€‚

> Getting Started Quickly (A Summary)
>
> The LLVM Getting Started documentation may be out of date. So, the [Clang Getting Started](http://clang.llvm.org/get_started.html) page might also be a good place to start.
>
> Hereâ€™s the short story for getting up and running quickly with LLVM:
>
> <cite>[Getting Started with the LLVM System â€” LLVM 5 documentation](http://llvm.org/docs/GettingStarted.html)</cite>

LLVM ã®å…¬å¼ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ã¯ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ãªè¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚
é¢å€’ãªã®ã§ã€ä»Šå›ã¯ Homebrew ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

## LLVM ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
$ brew install llvm
==> Installing dependencies for llvm: libffi
==> Installing llvm dependency: libffi
==> Downloading https://homebrew.bintray.com/bottles/libffi-3.2.1.sierra.bottle.
######################################################################## 100.0%
==> Pouring libffi-3.2.1.sierra.bottle.tar.gz
==> Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.

Some formulae require a newer version of libffi.

For compilers to find this software you may need to set:
    LDFLAGS:  -L/usr/local/opt/libffi/lib

==> Summary
ğŸº  /usr/local/Cellar/libffi/3.2.1: 16 files, 297.0KB
==> Installing llvm
==> Downloading https://homebrew.bintray.com/bottles/llvm-4.0.0.sierra.bottle.ta
######################################################################## 100.0%
==> Pouring llvm-4.0.0.sierra.bottle.tar.gz
==> Caveats
LLVM executables are installed in /usr/local/opt/llvm/bin.
Extra tools are installed in /usr/local/opt/llvm/share/llvm.
To use the bundled libc++ please add the following LDFLAGS:
  LDFLAGS="-L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib"

This formula is keg-only, which means it was not symlinked into /usr/local.

macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have this software first in your PATH run:
  echo 'export PATH="/usr/local/opt/llvm/bin:$PATH"' >> ~/.bash_profile

For compilers to find this software you may need to set:
    LDFLAGS:  -L/usr/local/opt/llvm/lib
    CPPFLAGS: -I/usr/local/opt/llvm/include


If you need Python to find bindings for this keg-only formula, run:
  echo /usr/local/opt/llvm/lib/python2.7/site-packages >> /usr/local/lib/python2.7/site-packages/llvm.pth
  mkdir -p /Users/user/Library/Python/2.7/lib/python/site-packages
  echo 'import site; site.addsitedir("/usr/local/lib/python2.7/site-packages")' >> /Users/user/Library/Python/2.7/lib/python/site-packages/homebrew.pth
==> Summary
ğŸº  /usr/local/Cellar/llvm/4.0.0: 2,245 files, 1GB
```

1GB ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚

å¿…è¦ã§ã‚ã‚Œã°ç’°å¢ƒå¤‰æ•°ã® `PATH` ã‚’è¨­å®šã™ã‚‹ã‚ˆã†ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚

```
$ echo 'export PATH="/usr/local/opt/llvm/bin:$PATH"' >> ~/.bash_profile
```

Python to find bindings ãŒå¿…è¦ã§ã‚ã‚Œã°æ¬¡ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã‚ˆã†ã§ã™ã€‚

```
$ echo /usr/local/opt/llvm/lib/python2.7/site-packages >> /usr/local/lib/python2.7/site-packages/llvm.pth
$ mkdir -p /Users/user/Library/Python/2.7/lib/python/site-packages
$ echo 'import site; site.addsitedir("/usr/local/lib/python2.7/site-packages")' >> /Users/user/Library/Python/2.7/lib/python/site-packages/homebrew.pth
```

Python to find bindings ã£ã¦ä½•ã‹ãªï¼Ÿã¨æ€ã£ã¦èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€

> clang ASTã®æƒ…å ±ãŒæ¬²ã—ã‹ã£ãŸã®ã§ï¼Œpython bindingsã‚’ä½¿ãŠã†ã¨ã—ãŸã‚‰ã¾ãŸã¤ã¾ã‚Šã¾ã—ãŸï¼ æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸã®ã‚’ãƒ¡ãƒ¢ï¼
>
> ...ç•¥...
>
> å‹•ã‹ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã¯ã“ã‚Œï¼
>
> [main.py]
>
>     import sys
>     
>     import clang.cindex
>     from clang.cindex import Index
>     from clang.cindex import Config
>     
>     def print_node_tree(node):
>         print "%s : %s" % (node.kind.name, node.displayname)
>         for child in node.get_children():
>             print_node_tree(child)
>     
>     index = Index.create()
>     tu = index.parse("test.cpp")
>     print_node_tree(tu.cursor)
>
> <cite>[Clangã®python bindingsã‚’ä½¿ã† - è„±åˆå¿ƒè€…ã‚’ç›®æŒ‡ã™](http://asdm.hatenablog.com/entry/2015/01/08/170707)</cite>

Python ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¸­ã‹ã‚‰ C++ ç­‰ã®ã‚½ãƒ¼ã‚¹ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ãªã‚‚ã®ã‚‰ã—ã„ã¨è§£é‡ˆã—ã¾ã—ãŸã€‚
ä»Šå›ã¯ Python bindings ã¯å¿…è¦ãªã•ãã†ã§ã—ãŸã®ã§è¨­å®šã—ã¾ã›ã‚“ã§ã—ãŸã€‚

## Numba ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(2å›ç›®)

```
$ pip install numba
Collecting numba
Requirement already satisfied: numpy in ./lib/python3.6/site-packages (from numba)
Collecting llvmlite (from numba)
  Using cached llvmlite-0.16.0.tar.gz
Building wheels for collected packages: llvmlite
  Running setup.py bdist_wheel for llvmlite ... error
  Complete output from command /Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" bdist_wheel -d /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/tmpoogsp4e5pip-wheel- --python-tag cp36:
  running bdist_wheel
  running build
  got version from file /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/llvmlite/_version.py {'version': '0.16.0', 'full': '964cf1d6d725b000c769379a5efe11932fcfc551'}
  running build_ext
  /Users/user/ENV/bin/python3.6 /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py
  LLVM version... 4.0.0

  Traceback (most recent call last):
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 152, in <module>
      main()
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 146, in main
      main_posix('osx', '.dylib')
    File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 119, in main_posix
      raise RuntimeError(msg)
  RuntimeError: Building llvmlite requires LLVM 3.9.x. Be sure to set LLVM_CONFIG to the right executable path.
  Read the documentation at http://llvmlite.pydata.org/ for more information about building llvmlite.

  error: command '/Users/user/ENV/bin/python3.6' failed with exit status 1

  ----------------------------------------
  Failed building wheel for llvmlite
  Running setup.py clean for llvmlite
Failed to build llvmlite
Installing collected packages: llvmlite, numba
  Running setup.py install for llvmlite ... error
    Complete output from command /Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-o46hy98_-record/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/ENV/bin/../include/site/python3.6/llvmlite:
    running install
    running build
    got version from file /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/llvmlite/_version.py {'version': '0.16.0', 'full': '964cf1d6d725b000c769379a5efe11932fcfc551'}
    running build_ext
    /Users/user/ENV/bin/python3.6 /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py
    LLVM version... 4.0.0

    Traceback (most recent call last):
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 152, in <module>
        main()
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 146, in main
        main_posix('osx', '.dylib')
      File "/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/ffi/build.py", line 119, in main_posix
        raise RuntimeError(msg)
    RuntimeError: Building llvmlite requires LLVM 3.9.x. Be sure to set LLVM_CONFIG to the right executable path.
    Read the documentation at http://llvmlite.pydata.org/ for more information about building llvmlite.

    error: command '/Users/user/ENV/bin/python3.6' failed with exit status 1

    ----------------------------------------
Command "/Users/user/ENV/bin/python3.6 -u -c "import setuptools, tokenize;__file__='/private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" install --record /var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-o46hy98_-record/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/ENV/bin/../include/site/python3.6/llvmlite" failed with error code 1 in /private/var/folders/3m/p627w85d35b_tt0lrxzndm4c0000gn/T/pip-build-d41q9kgl/llvmlite/
```

æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

* `RuntimeError: Building llvmlite requires LLVM 3.9.x. Be sure to set LLVM_CONFIG to the right executable path.`

Numba ãŒä¾å­˜ã—ã¦ã„ã‚‹ Python ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹ llvmlite ãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹ã®ãŒ `LLVM 3.9.x` ã§ã€Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ LLVM ãŒ `LLVM version... 4.0.0` ã ã‹ã‚‰ã®ã‚ˆã†ã§ã™ã€‚

## å¯¾å‡¦

> ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸLLVMã®ãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³ã¯3.9.1ã§ã€llvmliteãŒå¿…è¦ã¨ã™ã‚‹LLVMã®ãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³ã¯3.8.xã‚‰ã—ã„ã®ã§ã€ãƒ´ã‚¡ãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è½ã¨ã—ã¦LLVMã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¿ãŸã„ã§ã™ã€‚
>
> ä¸Šæ‰‹ãã„ã£ãŸæ‰‹é †
>
> s-1. llvmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« `brew install homebrew/versions/llvm38`  
> s-2. `export LLVM_CONFIG=/usr/local/Cellar/llvm38/3.8.1/bin/llvm-config-3.8`  
> s-3. llvmlite ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« `pip3 install llvmlite`  
> s-4. numbaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« `pip3 install numba`
>
> <cite>[Python Numba ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« - ã‚µãƒ–ãƒ­ã‚¦ä¸¸](http://inarizuuuushi.hatenablog.com/entry/2016/12/25/014111)</cite>

LLVM ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è½ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚

## ç¶šã

Python ã®ç’°å¢ƒè¨­å®šã«ã¤ã„ã¦ã®è¨˜äº‹ã§è¨€ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå°‘ã—ç†è§£ã§ãã¦ãã¾ã—ãŸã€‚

åˆã‚ã¦ã§çŸ¥ã‚‰ãªã„ã“ã¨ãŒå¤šã„ãŸã‚èª¿ã¹ãªãŒã‚‰é€²ã‚ã‚‹ã“ã¨ã«ãªã‚‹ã‚ã‘ã§ã™ãŒã€æœ¬æ¥ã®ç›®çš„ã¨é•ã†ã“ã¨ã«æ™‚é–“ãŒã‹ã‹ã‚Šã™ãã¦ã—ã¾ã£ã¦ã€æ„å‘³ãŒã‚ã‚‹ã®ã‹è€ƒãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚

å¯¾å‡¦ã«ã‚ã‚‹ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯é¢å€’ãªã®ã§ã€ã‚‚ã†ç´ ç›´ã« Anaconda ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

æœ€åˆã‹ã‚‰ Anaconda ã‚’ä½¿ãˆã°ã‚ˆã‹ã£ãŸã€‚

## 8 April 2017 è¿½è¨˜

æ¬¡ã®è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚

* [Docker ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰ Docker ã® Anaconda(Jupyter, Numba) ã‚’ä½¿ã†ã¾ã§]({{< relref "71.md" >}})

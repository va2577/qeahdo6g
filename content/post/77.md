---
title: 新しい Surface Pro (2017) に接続した外付け HDD が断続的に切れる
date: 2017-12-31T15:35:49+09:00
tags:
  - Surface
  - Windows
---

Surface に接続した外付け HDD が度々切断されるので、気になりつつもそのままにしていたので調べてみました。

<!--more-->

自分の場合は、次の引用のように設定したところ解消されたようでした。

> 1. USBで問題の外付けHDDを接続します。
> 1. デバイスマネージャーを起動し、問題のHDDを見つけます。「ディスク ドライブ」から外付けHDDを見つけて選択状態にします。
> 1. デバイスマネージャーの表示方法を変更します。上のメニューから[表示]→[デバイス（接続別）]を選びます。
> 1. 接続別にすることで問題となる「USB 大容量記憶装置」が分かるので、「USB 大容量記憶装置」を右クリックして「プロパティ」を選択します。 
> 1. [詳細]タブを開き、「プロパティ」を「ハードウェア ID」にします。この時、画像赤枠の部分（ "VID\_" と "PID\_" に続く英数字）をメモしてください。この場合は「041100A2」となります。
> 1. レジストリエディタを開きます。以下の場所にアクセスします。`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\usbstor`
> 1. 「usbstor」以下に新しいキーを作成します。「usbstor」を右クリックして「新規」→「キー」を選択し、新しいキーを作成します。キーの名前は、先ほどメモした英数字を入力してください。順番はVID→PIDです。先ほどの例でいけば「041100A2」になります。
> 1. 新しく作成したキーの中に新しくサブキーを作成します。右クリックし「新規」→「DWORD（32ビット）値」を選択して新しいレジストリサブキーを作成します。キー名は「DeviceHackFlags」として、値を16進数で「400」としてください。
> 1. 追加と変更が完了したら、F5キーを押して変更を反映させます。
>
> 外付けHDDですが、一度取り外してから再度接続するとうまく反映されるようです。これで一定時間経ってもスリープへ移行しなければ成功です。
>
> <cite>[Windows8.1で外付けHDDがスリープする問題解決したかも？ - 道すがら講堂](http://michisugara.jp/archives/2013/windows8.1_hdd_2.html)</cite>

## 終わり

レジストリーはあまり好きになれなくて、Microsoft が変わって、Windows からもレジストリーがなくならないかな。

## 20 May 2018 追記

[Windows 10 April 2018 Update](https://support.microsoft.com/en-us/help/4028685/windows-10-get-the-update) を適用したらまた切れるようになりました。
HDD のハードウェア ID が前と変わったように見えました。
同じように設定したら解消されたみたいでした。
